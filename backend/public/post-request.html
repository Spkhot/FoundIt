<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Post Lost Item Request | FoundIt Hub</title>
  <link rel="icon" href="logo.png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .animate-fadeInUp {
      animation: fadeInUp 0.6s ease-out forwards;
      opacity: 0;
    }
  </style>
</head>
<body class="bg-slate-900 text-white">

  <div class="max-w-2xl mx-auto py-12 px-6">
    <h1 class="text-3xl md:text-4xl font-bold text-center text-cyan-400 mb-8 animate-fadeInUp">
      Lost Something? Post a Request
    </h1>

    <form id="requestForm" class="bg-slate-800/50 backdrop-blur-md border border-white/10 p-6 rounded-xl shadow-xl space-y-6 animate-fadeInUp delay-1">
      
      <div>
        <label class="block mb-1 text-sm text-slate-300">Product Name <span class="text-red-500">*</span></label>
        <input type="text" name="productName" required class="w-full px-4 py-2 bg-slate-700 text-white rounded-lg border border-slate-600">
      </div>

      <div>
        <label class="block mb-1 text-sm text-slate-300">Category <span class="text-red-500">*</span></label>
        <select name="category" required class="w-full px-4 py-2 bg-slate-700 text-white rounded-lg border border-slate-600">
          <option value="">Select Category</option>
          <option value="wallet">Wallet</option>
          <option value="id">ID</option>
          <option value="documents">Documents</option>
          <option value="shoes">Shoes</option>
          <option value="electronics">Electronics</option>
          <option value="other">Other</option>
        </select>
      </div>

      <div>
        <label class="block mb-1 text-sm text-slate-300">Location <span class="text-red-500">*</span></label>
        <input type="text" name="location" required class="w-full px-4 py-2 bg-slate-700 text-white rounded-lg border border-slate-600">
      </div>

      <div>
        <label class="block mb-1 text-sm text-slate-300">Description</label>
        <textarea name="description" rows="4" class="w-full px-4 py-2 bg-slate-700 text-white rounded-lg border border-slate-600"></textarea>
      </div>

      <div>
        <label class="block mb-1 text-sm text-slate-300">Contact Number <span class="text-red-500">*</span></label>
        <input type="tel" name="contact" required class="w-full px-4 py-2 bg-slate-700 text-white rounded-lg border border-slate-600">
      </div>

      <div>
        <label class="block mb-1 text-sm text-slate-300">Reward (Optional)</label>
        <input type="text" name="reward" placeholder="Optional reward if any" class="w-full px-4 py-2 bg-slate-700 text-white rounded-lg border border-slate-600">
      </div>

      <div class="flex justify-between mt-6">
        <a href="index.html" class="px-6 py-2 rounded-full border border-white/20 hover:bg-white/10 transition text-white">← Back</a>
        <button type="submit" class="bg-cyan-600 hover:bg-cyan-500 px-6 py-2 rounded-full text-white font-semibold transition">
          Submit Request
        </button>
      </div>
    </form>

    <p id="message" class="text-center text-green-400 mt-4 hidden"></p>
  </div>

  <script>
    const BASE_URL = location.hostname === "localhost"
      ? "http://localhost:5000"
      : "https://foundit-imky.onrender.com";

    const form = document.getElementById('requestForm');
    const message = document.getElementById('message');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());

      try {
        const res = await fetch(`${BASE_URL}/api/requests`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data),
        });

        if (!res.ok) throw new Error("Failed to post request");

        form.reset();
        message.textContent = "✅ Lost item request posted successfully!";
        message.classList.remove("hidden");
        message.classList.remove("text-red-400");
        message.classList.add("text-green-400");

      } catch (err) {
        message.textContent = "❌ Failed to post request. Try again.";
        message.classList.remove("hidden");
        message.classList.remove("text-green-400");
        message.classList.add("text-red-400");
      }
    });
  </script>
</body>
</html>
